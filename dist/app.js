!function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const s={};function r(){return s}class o{static hideAllPages(){let e=document.getElementsByClassName("page");for(let t=0;t<e.length;t++)e[t].hidden=!0}static showOnlyOnePage(e){o.hideAllPages(),document.querySelector("."+e).hidden=!1}}function a(...e){e.forEach(e=>{document.querySelector("#"+e.button).addEventListener("touchend",function(e){e.preventDefault(),e.target.click()},!1),document.querySelector("#"+e.button).addEventListener("click",()=>{o.showOnlyOnePage(e.nextPage),history.pushState({},"",e.pagePath)})})}class c{constructor(){c.pagePath(),c.pageBoxName(),this.addEventsOnButtons()}static pagePath(){}static pageBoxName(){}addEventsOnButtons(){}addRedirectOnButtons(...e){a(...e)}}const i={OK_MESSAGE:"ok",EMPTY_MESSAGE:"empty",INCORRECT_MESSAGE:"incorrect"};class u{static responseOk(){return i.OK_MESSAGE}static responseEmpty(){return i.EMPTY_MESSAGE}static responseIncorrect(){return i.INCORRECT_MESSAGE}static correctLogin(e){if(!e)return u.responseEmpty();return/^[\w\d]{3,10}$/.test(e)?u.responseOk():u.responseIncorrect()}static correctPassword(e){if(!e)return u.responseEmpty();return/\S{3,16}$/.test(e)?u.responseOk():u.responseIncorrect()}}const d={HTTP_OK:200,XHR_READY:4};class l{constructor(){r().requester=this}static baseUrl(){return"https://keklik-api.herokuapp.com/"}static requestPost(e,t,n){const s=new XMLHttpRequest;s.open("POST",this.baseUrl()+e,!0),s.withCredentials=!0;const r=JSON.stringify(t);s.setRequestHeader("Content-Type","application/json; charset=utf8"),s.send(r),s.onreadystatechange=function(){if(s.readyState!==d.XHR_READY)return;if(+s.status!==d.HTTP_OK)return n(s,null);const e=JSON.parse(s.responseText);n(null,e)}}static requestGet(e,t){const n=new XMLHttpRequest;n.open("GET",this.baseUrl()+e,!0),n.withCredentials=!0,n.send(),n.onreadystatechange=function(){if(n.readyState!==d.XHR_READY)return;if(+n.status!==d.HTTP_OK)return t(n,null);const e=JSON.parse(n.responseText);t(null,e)}}static requestPatch(e,t,n){const s=new XMLHttpRequest;s.open("PATCH",this.baseUrl()+e,!0),s.withCredentials=!0;const r=JSON.stringify(t);s.setRequestHeader("Content-Type","application/json; charset=utf8"),s.send(r),s.onreadystatechange=function(){if(s.readyState!==d.XHR_READY)return;if(+s.status!==d.HTTP_OK)return n(s,null);const e=JSON.parse(s.responseText);n(null,e)}}static auth(e,t,n){const s={username:e,password:t};l.requestPost("api/users/signin/",s,n)}static register(e,t,n){const s={username:e,password:t};l.requestPost("api/users/",s,n)}static whoami(e){l.requestGet("api/users/me/",e)}}const g={EMPTY_MESSAGE:"Заполнены не все поля",INCORRECT_MESSAGE:"Использованы недопустимые символы",RESPONSE_MESSAGE:"Некорректный ввод или логин уже существует",SUCCESS_SIGN_UP_MESSAGE:"Вы успешо зарегистрировались!"};class p extends u{constructor(){super(),this.loginValue="",this.passwordValue="",this.errorBox=null,this.addEventsToButtons(),console.log("reg FORM")}static msgEmptyField(){return g.EMPTY_MESSAGE}static msgIncorrectInput(){return g.INCORRECT_MESSAGE}static msgResponseFromHost(){return g.RESPONSE_MESSAGE}static msgSignUpSuccess(){return g.SUCCESS_SIGN_UP_MESSAGE}static validate(e,t,n){let s=u.correctLogin(e),r=u.correctPassword(t);return s===u.responseEmpty()||r===u.responseEmpty()?(n.innerHTML=p.msgEmptyField(),!1):s===u.responseIncorrect()||r===u.responseIncorrect()?(n.innerHTML=p.msgIncorrectInput(),!1):(n.innerHTML="",!0)}clearForm(){this.clearFields("regform-login","regform-password","regform-err")}sendRequest(){l.register(this.loginValue,this.passwordValue,e=>{if(e)return this.errorBox.innerHTML=p.msgResponseFromHost();alert(p.msgSignUpSuccess()),this.clearForm(),document.querySelector(".register-page__button-back").click()})}addEventsToButtons(){document.querySelector("#regformBtn").addEventListener("click",()=>{this.loginValue=document.querySelector("#regform-login").value,this.passwordValue=document.querySelector("#regform-password").value,this.errorBox=document.querySelector("#regform-err"),p.validate(this.loginValue,this.passwordValue,this.errorBox)&&this.sendRequest()})}}class m extends c{constructor(){super(),this.form=new p}static pagePath(){return"/register"}static pageBoxName(){return"register-page"}getForm(){return this.form}addEventsOnButtons(){}}class E extends c{constructor(){super(),this.addRedirectOnButtons({button:"course-card-1",nextPage:"course-page",pagePath:"/course"}),this.addEventsOnButtons(),console.log("office")}static pagePath(){return"/office"}static pageBoxName(){return"office-page"}addEventsOnButtons(){document.getElementById("to-courses-btn").onclick=(()=>{console.log("C1"),document.getElementById("courses-desk").hidden=!1,document.getElementById("to-quizes-btn").classList.remove("active"),document.getElementById("quizes-desk").hidden=!0,document.getElementById("to-courses-btn").classList.add("active"),document.getElementById("profile").hidden=!0,document.getElementById("to-profile-btn").classList.remove("active")}),document.getElementById("to-quizes-btn").onclick=(()=>{console.log("C2"),document.getElementById("courses-desk").hidden=!0,document.getElementById("to-quizes-btn").classList.add("active"),document.getElementById("quizes-desk").hidden=!1,document.getElementById("to-courses-btn").classList.remove("active"),document.getElementById("profile").hidden=!0,document.getElementById("to-profile-btn").classList.remove("active")}),document.getElementById("to-profile-btn").onclick=(()=>{console.log("C3"),document.getElementById("courses-desk").hidden=!0,document.getElementById("to-quizes-btn").classList.remove("active"),document.getElementById("quizes-desk").hidden=!0,document.getElementById("to-courses-btn").classList.remove("active"),document.getElementById("profile").hidden=!1,document.getElementById("to-profile-btn").classList.add("active")})}}class h extends c{constructor(){super(),this.addEventsOnButtons(),this.addRedirectOnButtons({button:"group-card-1",nextPage:"group-page",pagePath:"/group"}),console.log("course")}static pagePath(){return"/course"}static pageBoxName(){return"course-page"}addEventsOnButtons(){}}class f extends c{constructor(){super(),this.addEventsOnButtons(),this.addRedirectOnButtons({button:"to-play-btn-1",nextPage:"play-page",pagePath:"/play"}),console.log("group")}static pagePath(){return"/group"}static pageBoxName(){return"group-page"}addEventsOnButtons(){}}class y{constructor(){this.addRedirectOnNavBtn({button:"nav-main-btn",nextPage:"main-page",pagePath:"/main"},{button:"nav-login-btn",nextPage:"register-page",pagePath:"/register"},{button:"nav-info-btn",nextPage:"info-page",pagePath:"/info"},{button:"nav-office-btn",nextPage:"office-page",pagePath:"/office"}),r().registerPage=new m,r().officePage=new E,r().coursePage=new h,r().groupPage=new f;m.pagePath();r().registerPage.addRedirectOnButtons({button:"regformBtn",nextPage:"login-page",pagePath:"/main"}),y.redirect(),window.addEventListener("popstate",()=>{y.redirect()})}navigate(){}addRedirectOnNavBtn(...e){a(...e)}static redirect(){switch(window.location.pathname){case"/main":o.showOnlyOnePage("main-page");break;case"/office":o.showOnlyOnePage("office-page");break;case"/register":o.showOnlyOnePage("register-page");break;case"/info":o.showOnlyOnePage("info-page");break;case"/course":o.showOnlyOnePage("course-page");break;case"/group":o.showOnlyOnePage("group-page");break;case"/play":o.showOnlyOnePage("play-page");break;case"/edit":o.showOnlyOnePage("edit-page");break;default:o.showOnlyOnePage("main-page")}}}window.addEventListener("load",function(){console.log("HELLO APP"),r().router=new y,r().router,document.querySelector(".main-box").hidden=!1})}]);